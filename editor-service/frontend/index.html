<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Phronidoc - Documentation Editor</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üìù</text></svg>">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/codemirror.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/theme/material.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;500&display=swap">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/codemirror.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/mode/markdown/markdown.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/addon/edit/closebrackets.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/addon/edit/matchbrackets.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/marked/4.3.0/marked.min.js"></script>
</head>
<body>
    <div class="app-container">
        <!-- Top Navigation Bar -->
        <nav class="top-nav">
            <div class="nav-brand">
                <span class="nav-logo">üìù</span>
                <div class="nav-brand-text">
                    <h1>Phronidoc</h1>
                    <p>Documentation Editor</p>
                </div>
            </div>
            <div class="nav-actions">
                <button id="newSectionBtn" class="nav-btn nav-btn-primary" title="Create new section">
                    <span class="nav-btn-icon">+</span>
                    <span class="nav-btn-text">Section</span>
                </button>
                <button id="newSubsectionBtn" class="nav-btn nav-btn-primary" title="Create new sub-section">
                    <span class="nav-btn-icon">+</span>
                    <span class="nav-btn-text">Sub-section</span>
                </button>
                <button id="newDocBtn" class="nav-btn nav-btn-primary" title="Create new document">
                    <span class="nav-btn-icon">+</span>
                    <span class="nav-btn-text">Document</span>
                </button>
                <button id="refreshBtn" class="nav-btn nav-btn-secondary" title="Refresh">
                    <span class="nav-btn-icon">üîÑ</span>
                </button>
            </div>
        </nav>

        <div class="main-layout">
            <!-- Left Sidebar Navigation (HPC Docs Style) -->
            <aside class="nav-sidebar">
                <div class="nav-sidebar-header">
                    <input type="text" id="navSearchInput" placeholder="Search..." class="nav-search">
                </div>
                <nav class="nav-tree" id="navTree">
                    <div class="loading">Loading navigation...</div>
                </nav>
            </aside>

            <!-- Main Content Area -->
            <main class="content-area">
                <!-- Empty State -->
                <div id="emptyState" class="content-empty">
                    <div class="empty-content">
                        <h2>Welcome to Phronidoc</h2>
                        <p>Select a document from the navigation to view or edit, or create a new one.</p>
                        <div class="empty-actions">
                            <button id="emptyNewSectionBtn" class="btn btn-primary">+ New Section</button>
                            <button id="emptyNewDocBtn" class="btn btn-primary">+ New Document</button>
                        </div>
                    </div>
                </div>

                <!-- Document View/Edit Container -->
                <div id="documentContainer" class="document-container" style="display: none;">
                    <!-- Document Header -->
                    <header class="doc-header">
                        <div class="doc-header-left">
                            <h1 id="docTitle" class="doc-title"></h1>
                            <div class="doc-meta">
                                <span id="docPath" class="doc-path"></span>
                                <span id="docModified" class="doc-modified"></span>
                            </div>
                        </div>
                        <div class="doc-header-actions">
                            <button id="editToggleBtn" class="btn btn-secondary">‚úèÔ∏è Edit</button>
                            <button id="saveBtn" class="btn btn-primary" style="display: none;">üíæ Save</button>
                            <button id="deleteBtn" class="btn btn-danger" style="display: none;">üóëÔ∏è Delete</button>
                        </div>
                    </header>

                    <!-- Document Content -->
                    <div class="doc-content-wrapper">
                        <!-- Preview View (Default) -->
                        <article id="previewView" class="doc-preview">
                            <div id="previewContent" class="markdown-body"></div>
                        </article>

                        <!-- Edit View -->
                        <div id="editView" class="doc-editor" style="display: none;">
                            <div id="editorContainer" class="editor-wrapper">
                                <textarea id="markdownEditor"></textarea>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- Modals -->
    <!-- New Section Modal -->
    <div id="newSectionModal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Create New Section</h2>
                <button class="close-btn" id="closeSectionModal">&times;</button>
            </div>
            <div class="modal-body">
                <label for="sectionName">Section Name:</label>
                <input type="text" id="sectionName" placeholder="e.g., Product, Support, etc." class="form-input">
                <small>This will create a new top-level section in the documentation.</small>
            </div>
            <div class="modal-footer">
                <button id="cancelSectionBtn" class="btn btn-secondary">Cancel</button>
                <button id="createSectionBtn" class="btn btn-primary">Create Section</button>
            </div>
        </div>
    </div>

    <!-- New Sub-section Modal -->
    <div id="newSubsectionModal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Create New Sub-section</h2>
                <button class="close-btn" id="closeSubsectionModal">&times;</button>
            </div>
            <div class="modal-body">
                <label for="parentSection">Parent Section:</label>
                <select id="parentSection" class="form-input">
                    <option value="">Select a section...</option>
                </select>
                
                <label for="subsectionName">Sub-section Name:</label>
                <input type="text" id="subsectionName" placeholder="e.g., API, Guides, etc." class="form-input">
                <small>This will create a sub-section within the selected parent section.</small>
            </div>
            <div class="modal-footer">
                <button id="cancelSubsectionBtn" class="btn btn-secondary">Cancel</button>
                <button id="createSubsectionBtn" class="btn btn-primary">Create Sub-section</button>
            </div>
        </div>
    </div>

    <!-- New Document Modal -->
    <div id="newDocModal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Create New Document</h2>
                <button class="close-btn" id="closeModal">&times;</button>
            </div>
            <div class="modal-body">
                <label for="docSection">Section:</label>
                <select id="docSection" class="form-input">
                    <option value="">Select a section...</option>
                </select>
                
                <label for="docSubsection">Sub-section (optional):</label>
                <select id="docSubsection" class="form-input">
                    <option value="">None (root of section)</option>
                </select>
                
                <label for="newDocPath">Document Path (auto-generated):</label>
                <input type="text" id="newDocPath" placeholder="Will be generated based on selection" class="form-input" readonly>
                <small>Path is auto-generated. You can edit it manually if needed.</small>
                
                <label for="newDocTitle">Title:</label>
                <input type="text" id="newDocTitle" placeholder="Document Title" class="form-input">
                
                <label for="newDocContent">Initial Content:</label>
                <textarea id="newDocContent" class="form-textarea" rows="10" placeholder="# Document Title

Write your content here..."></textarea>
            </div>
            <div class="modal-footer">
                <button id="cancelBtn" class="btn btn-secondary">Cancel</button>
                <button id="createBtn" class="btn btn-primary">Create</button>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>
